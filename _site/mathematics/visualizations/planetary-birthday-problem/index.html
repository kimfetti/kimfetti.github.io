<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Solving the Birthday Problem on Mars</title>

    <link rel="stylesheet" type="text/css" href="http://localhost:4000//assets/css/styles_feeling_responsive.css">

  

	<script type="text/javascript" async
			src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>

    <script src="http://localhost:4000//assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="The birthday problem is a classic probability question with a surprising result.  In this post, we will solve this puzzler and extend the result by considering the answer for every planet in our solar system.">
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ">
	<meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" >
	
	<link rel="author" href="https://plus.google.com/105464329327164540117">
	
	
	<link rel="canonical" href="http://localhost:4000//mathematics/visualizations/planetary-birthday-problem/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="Solving the Birthday Problem on Mars">
	<meta property="og:description" content="The birthday problem is a classic probability question with a surprising result.  In this post, we will solve this puzzler and extend the result by considering the answer for every planet in our solar system.">
	<meta property="og:url" content="http://localhost:4000//mathematics/visualizations/planetary-birthday-problem/">
	<meta property="og:locale" content="en_EN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Kimberly Fessel Blog">
	
	<meta property="article:author" content="https://www.facebook.com/">


	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="">
	<meta name="twitter:creator" content="">
	<meta name="twitter:title" content="Solving the Birthday Problem on Mars">
	<meta name="twitter:description" content="The birthday problem is a classic probability question with a surprising result.  In this post, we will solve this puzzler and extend the result by considering the answer for every planet in our solar system.">
	
	

	<link type="text/plain" rel="author" href="http://localhost:4000//humans.txt">

	

	

	<link rel="icon" sizes="32x32" href="http://localhost:4000//assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="http://localhost:4000//assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000//assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000//assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000//assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000//assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000//assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000//assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000//assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000//assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://localhost:4000//assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


	

</head>
<body id="top-of-page" class="page-fullwidth">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="http://localhost:4000/" class="icon-tree"> Kimberly Fessel Blog</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//info/">About</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//contact/">Contact</a></li>

            
            
          
        
        
      </ul>

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//">Home</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//blog/">Blog</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          
        

              

          
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<div id="masthead-with-background-color" style="background: #999999;">
	<div class="row">
		<figure class="small-12 columns">
			<img src="https://kimfetti.github.io/images//birthday_planet_header.jpg" alt="Kimberly Fessel Blog">
		</figure><!-- /.small-12.columns -->
	</div><!-- /.row -->
</div><!-- /#masthead -->




<div class="masthead-caption">
	<a href="https://www.nasa.gov/index.html">Voyager Montage by NASA. Public Domain. Credit: NASA.</a>
</div>







	


<div class="row t30">
	<div class="medium-12 columns">
		<article>
			<header>
				<p class="subheadline">Analytic Approximations</p>
				<h1>Solving the Birthday Problem on Mars</h1>
			</header>

			
			<p class="teaser">
				<em>The birthday problem is a classic probability question with a surprising result.  In this post, we will solve this puzzler and extend the result by considering the answer for every planet in our solar system.</em>
			</p>
			

			<!--more-->

<p>I was recently asked to develop a challenge problem for the <a href="https://www.thisismetis.com">Metis</a> data science bootcamp.  Perhaps it was my background in math or maybe my penchant for mild torture, but I decided to have students answer a few exercises from <a href="https://www.amazon.com/Challenging-Problems-Probability-Solutions-Mathematics-ebook/dp/B00A3M0VV8">Fifty Challenging Problems with Solutions</a> by Mosteller.  This is book is full of classic problems in probability, and I highly recommend it to anyone prepping for data science interviews!</p>

<p>One of my favorite sections in this book is the birthday series, which includes a version of the birthday problem.  This problem is about as famous as a probability question can get.  It has been featured on <a href="https://www.npr.org/templates/story/story.php?storyId=4542341">NPR</a>, written about in an <a href="https://en.wikipedia.org/wiki/A_Fall_of_Moondust">Arthur C. Clarke novel</a>, and it even has its <a href="https://en.wikipedia.org/wiki/Birthday_problem">own Wikipedia page</a>.</p>

<p>The problem goes something along the lines of:</p>

<blockquote>
  <p><span class="teaser">You are throwing a party and inviting random people you have never met. What’s the fewest number of people you need to invite to have at least 50% probability that two strangers will have the same birthday? <br />(Birth year need not match.)</span></p>
</blockquote>

<p>If you haven’t solved this one before, feel free to take a moment and give it a shot.  Be warned – <strong>spoilers ahead</strong>!</p>

<h2 id="solving-with-probability">Solving with Probability</h2>

<p>Rather than the brute force approach, it turns out that the answer can be found much more easily by considering the complementary case; that is, “How many people can you invite to expect a 50% chance that all invited people have <em>unique</em> birthdays?”  This “unsuccessful” probability along with the “successful” probability will sum to one.</p>

<p>Keeping the complementary case in mind, note that the first person at your party can have their birthday on any calendar day, but after that, each person must have a different day.  Let \(p_u\) be the probability that \(r\) people each have unique birthdays. We find
\[p_u = 1 \cdot \frac{N-1}{N} \cdot \frac{N-2}{N} \cdots \frac{N-r+1}{N} = \frac{N!}{(N-r)!N^r}\]
where \(N\) is the number of days in one year.</p>

<p>Backtracking to the original birthday problem, we now just need to find the minimum value of \(r\) people that satisfy:
\[p_{s} = 1 - \frac{N!}{(N-r)!N^r} &gt; \frac{1}{2}.\]</p>

<p>This expression doesn’t look all that pleasant to be solved outright, so instead we can build a little solver in Python–or the language of your choice!–to be able to compute \(p_s\) for any given \(r\) and \(N\).</p>
<div class="highlighter-rouge"><pre class="highlight"><code>def prob_birthday_success(r, N=365):
    if r &gt; N: 
        return 1.
    factorial = reduce(lambda x, y: x*y, range(N-r+1, N+1))
    power = N**r
    return (1 - factorial/power)
</code></pre>
</div>
<p>We steadily increase \(r\) and once we hit the \(p_s \geq \frac{1}{2}\) mark, we have our desired party size.  The table below illustrates solutions for 50% probability as well as a few others values of \(p_s\).</p>

<center>
<table width="400">
  <caption>Party size required for several success probabilities</caption>
  <colgroup>
    <col span="1" style="width: 50%;" />
    <col span="1" style="width: 50%;" />
  </colgroup>
  <thead>
    <tr>
      <th>Probability</th>
      <th>People Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0.05</td>
      <td>7</td>
    </tr>
    <tr>
      <td>0.1</td>
      <td>10</td>
    </tr>
    <tr>
      <td>0.25</td>
      <td>15</td>
    </tr>
    <tr>
      <td>0.5</td>
      <td>23</td>
    </tr>
    <tr>
      <td>0.75</td>
      <td>32</td>
    </tr>
    <tr>
      <td>0.9</td>
      <td>41</td>
    </tr>
    <tr>
      <td>0.999</td>
      <td>70</td>
    </tr>
   </tbody>
</table>
</center>

<p>Notice that if we invite just 23 people to our party, we will have a 50-50 chance in finding a shared birthday.  Inviting 60 or 70 people pretty much guarantees it.  Incredible!</p>

<p>So it’s plain to see that \(p_s\) increases rapidly as our party gets bigger here on Earth, but this led me to consider: “What would happen if the party took place on, say, Mars or Jupiter?”  Or in less whimsical terms: “How many people would we need if we varied the year length, \(N\)?”</p>

<h2 id="planetary-results">Planetary Results</h2>

<p>The first step in solving the birthday problem for the rest of our solar system is gathering <a href="https://www.universetoday.com/37507/years-of-the-planets/">year lengths for each planet</a>, which vary wildly from a meager 88 days on Mercury up to a whopping 60,182 days on Neptune.  In fact, your entire life will be confined to a single orbital period of Neptune and you will never experience a Neptunian birthday.  (Admittedly, the definition “birthday” gets a little murky on these other planets…  but more on this later.)</p>

<p>Once year lengths have been gathered, working out the problem for different values of \(N\) is as simple as returning to the Python function introduced earlier.  The required number of party goers to achieve a 50% probability of birthday matching on each planet can be found below. (As a child of the 80s, I must tell you it is <em>VERY</em> difficult for me to not include Pluto on this chart.  But there’s always hope for a <a href="https://www.space.com/40550-pluto-planet-debate-flares-up-again.html">Plutonian comeback</a>! :pray:)</p>

<center>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" align="center" width="1050" height="500" src="https://public.tableau.com/views/PlanetaryBirthdayProblem/Planets-50?:showVizHome=no&amp;:embed=true"> </iframe>
</center>
<p><br /></p>

<p>Even on Neptune where there are over 60,000 Earth days per year, we only require 290 people to have a 50% chance of matching birthdays.  That’s an amazingly small amount for such a massive number of days in each year!</p>

<p>So now we can turn back to our broader question: “What’s the overall trend as \(N\) increases?”  Well, the chart above is great for being able to read information associated with every planet, but it’s actually a bit misleading trendwise because both axes are on a log scale.  Let’s take a look at this same information but without the axial scaling.</p>

<center>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" align="center" width="700" height="400" src="https://public.tableau.com/views/PlanetaryBirthdayProblem/Planets-50-Trueaxes?:showVizHome=no&amp;:embed=true"> </iframe>
</center>
<p><br /></p>

<p>Ah ha!  Viewing the data this way, a trend that looks roughly like a power relationship emerges.  We will now take a closer look at the analytic expression for \(p_s\) to dive deeper into this relation.</p>

<h2 id="expanding-solution-with-approximations">Expanding Solution with Approximations</h2>

<p>We are about to embark upon the amazing world of expansions and approximations--AKA put your math pants on and fasten your seat belts!  (If this sort of nerdout isn’t your bag, no worries.  Just skip ahead to the end of this section where all will revealed… :crystal_ball:  Much of this work can be found in <a href="https://www.amazon.com/Challenging-Problems-Probability-Solutions-Mathematics-ebook/dp/B00A3M0VV8">Mosteller</a> as his solution to the birthday problem.)</p>

<p>First recall that 
\[e^{-x} = 1 - x + \frac{x^2}{2!} - \frac{x^3}{3!}+ \cdots,\]
so ultimately, \(e^{-x} \approx 1 - x\) for very small values of \(x\).  Now represent \(p_u\)--that’s the unsuccessful probability--as
\[p_u = \frac{N(N-1)(N-2)\cdots(N-r+1)}{N^r} = \frac{N^r - \hat{k}}{N^r} = 1 - \frac{k}{N}\]
where \(k\) contains multiple factors but all are smaller than \(N\).  Combining these two expressions we then find that
\[p_u = 1 - \frac{k}{N} \approx e^{-k/N},\]
which is valid because \(k/N\) is typically much smaller than one.</p>

<p>Now let’s further consider the values contained within \(k\).  Expanding out the numerator in \(p_u\), we have
\[p_u=\frac{N(N-1)\cdots(N-r+1)}{N^r} = \frac{N^r - N^{r-1}\left[0+1+2+\cdots(r-1)\right] + \cdots}{N^r} = 1 - \frac{0 + 1 + 2 + \cdots (r-1)}{N} + \cdots.\]
The value \(k\) represents several terms, but to leading order, it just looks the sum of 0 to \(r-1\).  More specificially,
\[k \approx 0 + 1 + 2 + \cdots + r-1 = \sum_{i=0}^{r-1}j = \frac{r(r-1)}{2}.\]
So where does this lead us?  Returning to our exponential expression above, we have
\[p_u \approx e^{-k/N} \approx e^{-r(r-1)/2N},\]
which looks MUCH nicer than the original expression we had for \(p_u\) that contained those factorials.  We can even come up with an expression to relate \(r\) to \(N\) more explicitly in the leading order.</p>

<p>Subbing in \(p_s = 1 - p_u\),
\[e^{-r(r-1)/2N} \approx 1 - p_s\]
and taking the natural log of each side, we eventually find
\[-\frac{r(r-1)}{2N} \approx \ln{(1 - p_s)}\]
and
\[r(r-1) \approx -2N\ln{(1-p_s)}.\]
So there you have it!  Subbing in any given value for \(p_s\) will fix the log factor and the other two quantities are related as
\[\mathcal{O}\left(r\right) \sim \mathcal{O}\left(\sqrt{N}\right).\]
The trend we saw in the planet chart was indeed a power relationship; specifically, \(r\) goes like \(\sqrt{N}\) as \(N\) increases in the birthday problem.  This means that even on planets with many, many days in a year, we don’t really need to increase our party size by all that much to ensure our 50-50 chance of finding birthday twins.</p>

<h2 id="approximation-in-action">Approximation in Action</h2>
<p>How good is this approximation in practice?  Well, the trendline we saw in the true-scale axes chart early was auto-fitted with Tableau with a power trend, and indeed, the equation for the resulting line was found to be</p>

<p>\[r = 1.28548 \cdot N^{0.491503}\]</p>

<p>So the square-root relationship appears to hold true.</p>

<p>We can also more explicitly consider what happens to our approximation as \(N\) gets larger. Because we are estimating
\[1-\frac{k}{N} \approx e^{-k/N},\]
this approximation should actually become <strong>more</strong> valid as \(N\) becomes larger since \(k/N\) will resultingly grow smaller.</p>

<p>Let’s now fix \(p_s = \frac{1}{2}\) and let \(r_{1/2}\) be the 50-50 chance party size. Plotting both the left-hand side of our approximation
\[\frac{r_{1/2}(r_{1/2}-1)}{2N} \approx -\ln{\frac{1}{2}}\]
for various values of \(N\), we see below that this approximation becomes more valid and encounters less variance about the \(-\ln{(1/2)}\) line as \(N \to \infty\).  (There is an added layer of complexity in this problem since we require \(r_{1/2}\)) to be an integer.  This requirement results in the approximation dancing a bit about the \(-\ln{(1/2)}\) line.)</p>

<center>
<img src="https://kimfetti.github.io/images/planetary-birthday-approx.png" alt="Approximation chart" width="900" height="400" />
</center>

<h2 id="conclusion">Conclusion</h2>

<p>The birthday problem is a classic that has been examined several different ways.  I hope you’ve enjoyed the planetary rendition and the deep dive into analytic approximations.</p>

<p>A few final thoughts to leave you with:</p>
<ol>
  <li>It is well-known that birthdays are not equally distributed throughout all 365 days here on Earth.  How does this non-uniformity affect our birthday solution?  It turns out that the uniform distribution of birthdays we used throughout this post is a worst-case scenario.  If birthdays are skewed to one day or the other, the odds that you will find birthday twins in your party actually increases… but not significantly.  Attempts at calculating the birthday problem for real-world datasets have shown the 23-person group to be a pretty consistent solution the 50% probability.</li>
  <li></li>
</ol>


		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->




	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              Kimberly Fessel is a Senior Data Scientist at Metis. Her enthusiasm for data storytelling often leads her toward better math, better visuals, and better science!
              <a href="http://localhost:4000//info/">More ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Extras</h5>
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href="http://localhost:4000/"  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000//info/"  title="Learn more about Kimberly">About</a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000//contact/"  title="Contact Kimberly">Contact</a>
                  </li>
              
                
                  <li >
                    <a href="https://www.thisismetis.com" target="_blank"  title="Learn more about Metis">This is Metis</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Thank You</h5>
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href="http://localhost:4000/"  title=""></a>
                </li>
            
              
                <li class="network-entypo" >
                  <a href="http://www.connellypartners.com/who-we-are/" target="_blank"  title="Photoshoot @ CP">Photoshoot @ CP</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>Template with &hearts; by <a href="http://phlow.de/">Phlow</a> with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> based on <a href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a>.</p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="https://www.linkedin.com/in/kimberlyfessel/" target="_blank" class="icon-linkedin" title="Professional profile"></a></li>
            
              <li><a href="http://github.com/kimfetti" target="_blank" class="icon-github" title="Code and more"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://localhost:4000//assets/js/javascript.min.js"></script>







<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>








</body>
</html>

