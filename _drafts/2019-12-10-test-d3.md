---
layout: page-fullwidth
title: "Testing D3"
subheadline: "Data Visualization"
meta_teaser: "Testing D3."
teaser: "<em>Testing D3.</em>"


header:
    image: lego_header.jpg
    background-color: "#999999"
    caption: "Photo by Alice Bartlett. Cropped and resized by author."
    caption_url: http://bit.ly/31rt1Zq
image:
    thumb: lego_thumb.jpg
    homepage: lego_header.jpg
    caption: "Photo by Alice Bartlett. Cropped by author."
    caption_url: http://bit.ly/31rt1Zq
categories:
    - visualizations
show_meta: true
comments: true
---
<!--more-->


<head>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>

    <!--Multiple button functions-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.3.0/d3.js"></script>  

    <style> 

        input {
          border: none;
          color: white;
          padding: 16px 32px;
          margin: 4px 2px;
          cursor: pointer;
        }
        
        input[name=updateButton] {
          background-color: #271B77;
          font-weight: bold;
        }
        
        input[name=resetButton] {
          background-color: #ADADB0;
        }

    </style>
</head>

hi there this is a test


<div id="paintContainer">
    <div id="option">
        <input name="updateButton" 
               type="button" 
               value="Move Pencil" 
               onclick="movePencil(); addPaint(1,800); addPaint(2,2000); incrUnits();"/>
        <input name="resetButton" 
               type="button" 
               value="Reset" 
               onclick="removePaint()"/>
    </div>
</div>

There is more to say

<div id="contraContainer">
    <div id="option">
        <input name="updateButton" 
               type="button" 
               value="Advance" 
               onclick="moveBlushers('left', 0); sickBlusher(); moveBlushers('center', 2500); sickGrinner();"/>
        <input name="resetButton" 
               type="button" 
               value="Reset"
               onclick="makeWell()"/>
</div>


<!-- Paint and Pencils Example -->
<script>
var dataset = [1, 2];
var pencilColor = "#F0C446";
var paintColor = "#271B77";

var svg = d3.select("div#paintContainer").append("svg")
  .attr("width",700)
  .attr("height", 400)
  .attr("align","center")
  .style('transform', 'translate(50%, 0%)');

var objects = svg.append("g");

var pencils = objects.selectAll("g").data(dataset)
                .enter()
                .append("g")
                .attr("id", function(d, i) { return i; })
                .attr("transform",function(d, i) {return "translate(" + i*50 + ",0)";});

var rects = pencils.append("rect")
                   .attr("x", 50)
                   .attr("y", 50)
                   .attr("width", 50)
                   .attr("height", 300)
                   .attr("fill", pencilColor)
                   .style("fill-opacity", .7)
                   .style("stroke-width",".2em")
                   .style("stroke", pencilColor);

var triangles = pencils.append("path")
                       .attr('d', function(d,i) { 
                                var x = 0, y = 50;
                                return 'M ' + (50+x) +' '+ y + ' l 25 -50 l 25 50 z';
                             })
                       .attr("fill", pencilColor)
                       .style("fill-opacity", .4)
                       .style("stroke-width",".2em")
                       .style("stroke", pencilColor);

var tips = pencils.append("path")
                  .attr('d', function(d, i) {
                            var x = 12.5, y = 25;
                            return 'M ' + (50+x) + ' ' + y + ' l ' + x + ' ' + -y + ' l ' + x + ' ' + y + ' z';
                        })
                  .style("fill-opacity", .7)
                  .style("stroke-width",".2em")
                  .style("stroke", "#393731");
                  
var paint = pencils.append("rect")
                   .attr("x", 50)
                   .attr("y", 300)
                   .attr("width", 50)
                   .attr("height", 50)
                   .attr("fill", paintColor)
                   .style("fill-opacity", 0.9)
                   .style("stroke-width",".2em")
                   .style("stroke", paintColor);


var text = svg.append("text");

text.attr("x", 225).attr("y", 50).attr("font-size",22);

var paintUnits = 1;

text.append("tspan").text("Paint:");
var paintText = text.append("tspan")
                    .attr("dx", 10)
                    .style("fill", paintColor)
                    .attr("font-weight", "bold")
                    .text(paintUnits + " Unit");
                  

// Functions called on button click
function movePencil() {
    d3.select("g").selectAll("*")
      .filter(function (d) { return d == 1; })
      .transition()
        .duration(750)
        .attr("transform", "translate(0,25)")
      .on("end",function() { // on end of transition...
		    d3.select(this)
		    	.transition() // second transition
					.delay(750)
					.attr("transform", "translate(0,0)")
		});
}

function addPaint(pencilNumber, delay) {
    d3.select("g").selectAll("*")
      .filter(function(d) { return d == pencilNumber; })
      .filter(function(d,i) { return i == 4; })
      .transition()
         .delay(delay)
         .attr("height", function(d) {
                            var height = d3.select(this)
                               .style('height')
                               .slice(0, -2)
                            return Math.min( Math.round(Number(height))+50, 300); } )
         .attr("y", function(d) {
                            var y = d3.select(this)
                               .style('y')
                               .slice(0, -2)
                            return Math.max( Math.round(Number(y))-50, 50); });
}


function incrUnits() {
    paintUnits++
    paintText.transition()
        .delay(2400)
        .text( Math.min(paintUnits, 6) + " Units");
}


// Function called on reset button click
function removePaint() {
    paint
      .transition()
      .duration(500)
        .attr("y", 300)
        .attr("height", 50);
    paintUnits = 1
    paintText.transition()
        .delay(250)
        .text( paintUnits + " Unit");
}


</script>



<!-- Contra Example -->
<script>
var data = [1, 2, 3, 4, 5];

var s = d3.select("div#contraContainer").append("svg")
  .attr("width",700)
  .attr("height", 400)
  .style('transform', 'translate(40%, 5%)');
  
var blushGroup = s.append("g").attr("id", "blushers");
  
var blushers = blushGroup.selectAll("image").data(data)
    .enter()
    .append("image")
    .attr('xlink:href', "{{ site.urlimg }}emoji_blush.png")
    .attr('width', 75)
    .attr('height', 75)
    .attr("x", function (d, i) { return d*100; })
    .attr("y", 0);
    
var grinGroup = s.append("g").attr("id", "grinners");

var grinners = grinGroup.selectAll("image").data(data)
    .enter()
    .append("image")
    .attr('xlink:href', "{{ site.urlimg }}emoji_grin.png")
    .attr('width', 70)
    .attr('height', 70)
    .attr("x", function (d, i) { return d*100; })
    .attr("y", 100);

var sickNum = 1;

function moveBlushers(pos, delay) {
    if (sickNum == 1) { return; }
    else {
    d3.select("#blushers")
      .selectAll("image")
      .transition()
      .delay(delay)
      .duration(1000)
      .attr("transform", function(d) { if (pos=="left") {return "translate(-100,0)";}
                                      else if (pos=="center") {return "translate(0, 0)";}
                                     });
    };                                   
}

function sickBlusher() {
    if (sickNum == 1) { delay = 200; }
    else { delay = 1200; }
    d3.select("#blushers")
      .selectAll("image")
      .filter( function (d) { return d == sickNum; } )
      .transition()
      .delay(delay)
      .style("opacity", 0)
      .attr("xlink:href", "{{ site.urlimg }}emoji_sick.png")
      .transition()
      .duration(800)
      .ease(d3.easeLinear)
      .style("opacity", 1);
}

function sickGrinner() {
    if (sickNum == 1) { delay = 1000; }
    else { delay = 3000; }
    d3.select("#grinners")
      .selectAll("image")
      .filter( function (d) { return d == sickNum; } )
      .transition()
        .delay(delay)
        .style("opacity", 0)
      .on("end", function() {
                    d3.select(this)
                      .transition()
                        .duration(800)
                        .ease(d3.easeLinear)
                        .style("opacity", 1)
                        .attr("xlink:href", "{{ site.urlimg }}emoji_sick.png")
                })
    sickNum++;
}


function makeWell() {
    d3.select("#blushers")
      .selectAll("image")
      .attr("xlink:href", "{{ site.urlimg }}emoji_blush.png")
    d3.select("#grinners")
      .selectAll("image")
      .attr("xlink:href", "{{ site.urlimg }}emoji_grin.png")
    sickNum = 1;
}

</script>